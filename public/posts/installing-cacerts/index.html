<!doctype html>
<html lang="en">
  <head><script src="/pages/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=pages/livereload" data-no-instant defer></script>
    <script>
      (function() {
        var t = localStorage.getItem('theme');
        if (t === 'dark' || t === 'light') document.documentElement.dataset.theme = t;
      })();
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Liste - http://localhost:1313/pages/">
    <title>Installing CA certs into the JVM truststore | Sachin</title>
    <meta name="description" content="">
    <meta property="og:url" content="http://localhost:1313/pages/posts/installing-cacerts/">
  <meta property="og:site_name" content="Sachin">
  <meta property="og:title" content="Installing CA certs into the JVM truststore">
  <meta property="og:description" content="When you’re hitting an internal API over HTTPS and the JVM doesn’t trust the corp CA, you get the usual PKIX path building failed or unable to find valid certification path errors. Fix: add the server’s cert (or the CA that signed it) into Java’s cacerts.
One-liner (replace paths and alias as needed):
sudo &#34;$JAVA_HOME/bin/keytool&#34; -importcert -alias &#34;api.corp.intranet&#34; -file &#34;/Users/user/Downloads/api.corp.intranet.cer&#34; -keystore &#34;$JAVA_HOME/lib/security/cacerts&#34; -storepass changeit -noprompt What to change:
-alias — Any label you’ll recognize (e.g. the hostname). Must be unique in the keystore. -file — Path to the .cer (or .crt) you got from the server or your security team. -keystore — Default truststore is $JAVA_HOME/lib/security/cacerts. Leave as-is unless you use a custom one. -storepass — Default password for the stock cacerts is changeit. Yes, really. Why sudo? The default cacerts is under $JAVA_HOME/lib/security/, which is usually root-owned. One-time add, then your JVM trusts that cert.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-02-12T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-02-12T00:00:00+00:00">
    <meta property="article:tag" content="Java">
    <meta property="article:tag" content="Ssl">
    <meta property="article:tag" content="Certificates">

    
  <meta itemprop="name" content="Installing CA certs into the JVM truststore">
  <meta itemprop="description" content="When you’re hitting an internal API over HTTPS and the JVM doesn’t trust the corp CA, you get the usual PKIX path building failed or unable to find valid certification path errors. Fix: add the server’s cert (or the CA that signed it) into Java’s cacerts.
One-liner (replace paths and alias as needed):
sudo &#34;$JAVA_HOME/bin/keytool&#34; -importcert -alias &#34;api.corp.intranet&#34; -file &#34;/Users/user/Downloads/api.corp.intranet.cer&#34; -keystore &#34;$JAVA_HOME/lib/security/cacerts&#34; -storepass changeit -noprompt What to change:
-alias — Any label you’ll recognize (e.g. the hostname). Must be unique in the keystore. -file — Path to the .cer (or .crt) you got from the server or your security team. -keystore — Default truststore is $JAVA_HOME/lib/security/cacerts. Leave as-is unless you use a custom one. -storepass — Default password for the stock cacerts is changeit. Yes, really. Why sudo? The default cacerts is under $JAVA_HOME/lib/security/, which is usually root-owned. One-time add, then your JVM trusts that cert.">
  <meta itemprop="datePublished" content="2025-02-12T00:00:00+00:00">
  <meta itemprop="dateModified" content="2025-02-12T00:00:00+00:00">
  <meta itemprop="wordCount" content="165">
  <meta itemprop="keywords" content="Java,Ssl,Certificates">
    
    <link rel="canonical" href="http://localhost:1313/pages/posts/installing-cacerts/">
    <link rel="icon" href="http://localhost:1313/pages//assets/favicon.ico">
    <link rel="dns-prefetch" href="https://www.google-analytics.com">
    <link href="https://www.google-analytics.com" rel="preconnect" crossorigin>
    <link rel="alternate" type="application/atom+xml" title="Sachin" href="http://localhost:1313/pages//atom.xml" />
    <link rel="alternate" type="application/json" title="Sachin" href="http://localhost:1313/pages//feed.json" />
    <link rel="shortcut icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII=">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Bricolage+Grotesque">
    
    
    <style>*,:after,:before{box-sizing:border-box;padding:0}body{font:1rem/1.5 bricolage grotesque,-apple-system,BlinkMacSystemFont,segoe ui,Helvetica,Arial,sans-serif;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;padding:2rem;background:#fffdfa;color:#000}.skip-link{position:absolute;top:-40px;left:0;background:#eee;z-index:100}.skip-link:focus{top:0}header{line-height:2;padding-bottom:1.5rem}.link{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.time{font-variant-numeric:tabular-nums;white-space:nowrap}blockquote{border-left:5px solid #eee;padding-left:1rem;margin:0}a,a:visited{color:inherit}a:hover,a.heading-link{text-decoration:none}pre{padding:.5rem;overflow:auto;overflow-x:scroll;overflow-wrap:normal}code,pre{font-family:San Francisco Mono,Monaco,consolas,lucida console,dejavu sans mono,bitstream vera sans mono,monospace;font-size:normal;font-size:small;background:#eee}code{margin:.1rem;border:none}ul{list-style-type:square}ul,ol{padding-left:1.2rem}.list{line-height:2;list-style-type:none;padding-left:0}.list li{padding-bottom:.1rem}.meta{color:#777}.content{max-width:70ch;margin:0 auto}header{line-height:2;display:flex;justify-content:space-between;padding-bottom:1rem}header a{text-decoration:none}header ul{list-style-type:none;padding:0}header li,header a{display:inline}h2.post{padding-top:.5rem}header ul a:first-child{padding-left:1rem}.nav{height:1px;background:#000;content:'';max-width:10%}.list li{display:flex;align-items:baseline}.list li time{flex:initial}.hr-list{margin-top:0;margin-bottom:0;margin-right:.5rem;margin-left:.5rem;height:1px;border:0;border-bottom:1px dotted #ccc;flex:1 0 1rem}.m,hr{border:0;margin:3rem 0}img{max-width:100%;height:auto}.post-date{margin:5% 0}.index-date{color:#9a9a9a}.animate-blink{animation:opacity 1s infinite;opacity:1}@keyframes opacity{0%{opacity:1}50%{opacity:.5}100%{opacity:0}}.tags{display:flex;justify-content:space-between}.tags ul{padding:0;margin:0}.tags li{display:inline}.avatar{height:120px;width:120px;position:relative;margin:-10px 0 0 15px;float:right;border-radius:50%}table{width:100%;border-collapse:collapse}th,td{border:1px solid #ddd;text-align:left;padding:8px}th{background-color:#f2f2f2} :root{--bg:#fffdfa;--text:#000;--text-muted:#777;--border:#ccc;--code-bg:#eee;--hr:#000;--table-border:#dddddd;--th-bg:#f2f2f2;--skip-link-bg:#eee;--blockquote-border:#eee}@media(prefers-color-scheme:dark){:root:not([data-theme=light]){--bg:#1a1a1a;--text:#e4e4e4;--text-muted:#9a9a9a;--border:#444;--code-bg:#2d2d2d;--hr:#e4e4e4;--table-border:#444;--th-bg:#2d2d2d;--skip-link-bg:#2d2d2d;--blockquote-border:#555}}[data-theme=dark]{--bg:#1a1a1a;--text:#e4e4e4;--text-muted:#9a9a9a;--border:#444;--code-bg:#2d2d2d;--hr:#e4e4e4;--table-border:#444;--th-bg:#2d2d2d;--skip-link-bg:#2d2d2d;--blockquote-border:#555}[data-theme=light]{--bg:#fffdfa;--text:#000;--text-muted:#777;--border:#ccc;--code-bg:#eee;--hr:#000;--table-border:#dddddd;--th-bg:#f2f2f2;--skip-link-bg:#eee;--blockquote-border:#eee}body{background:var(--bg)!important;color:var(--text)!important}.skip-link{background:var(--skip-link-bg)!important}header a,header a:visited,a,a:visited{color:inherit}.nav{background:var(--hr)!important}.header-divider{border:0;border-bottom:1px solid var(--border);margin:.75rem 0 1rem}.hr-list{border:0;border-bottom:1px solid var(--border);border-bottom-color:var(--border)!important}.meta,.index-date{color:var(--text-muted)!important}blockquote{border-left-color:var(--blockquote-border)!important}code,pre{background:var(--code-bg)!important;color:var(--text)}.content pre span,.content .highlight pre span{background:0 0!important}th,td{border-color:var(--table-border)!important}th{background-color:var(--th-bg)!important}.theme-toggle{background:0 0;border:none;cursor:pointer;font:inherit;color:inherit;padding:0;margin-left:.5rem;opacity:.8;font-size:.9em}.theme-toggle:hover{opacity:1}.theme-toggle:focus{outline:1px dotted currentColor;outline-offset:2px}.post-list .post-link{cursor:pointer;text-decoration:underline;text-underline-offset:.15em;text-decoration-color:var(--border);transition:text-decoration-color .15s ease}.post-list .post-link:hover{text-decoration-color:var(--text)}.post-list-item{margin-bottom:.5rem}ul.post-list .post-list-item{padding:.25rem 0}ul.post-list .post-list-item:hover .post-link{text-decoration-color:var(--text)}.content pre{position:relative;padding-top:2.25rem}.copy-code-btn{position:absolute;top:.35rem;right:.35rem;font-size:.7rem;padding:.25rem .5rem;border:1px solid var(--border);background:var(--bg);color:var(--text);cursor:pointer;border-radius:2px;opacity:.85;font-family:inherit;line-height:1.2}.copy-code-btn:hover{opacity:1}.copy-code-btn:focus{outline:1px dotted currentColor;outline-offset:2px}.copy-code-btn.copied{opacity:1}.tag-filter{display:flex;flex-wrap:wrap;gap:.4rem;margin-top:1rem;margin-bottom:1.25rem;align-items:center}.tag-filter-btn{font:inherit;font-size:.85rem;padding:.25rem .75rem;border:1px solid var(--border);background:var(--bg);color:var(--text);cursor:pointer;border-radius:9999px;opacity:.85}.tag-filter-btn:hover{opacity:1}.tag-filter-btn.active{font-weight:600;border-color:var(--text);opacity:1}.tag-filter-btn:focus{outline:1px dotted currentColor;outline-offset:2px}</style>
  
    
  
  
  <script type="application/ld+json">
  {
      "@context": "http://schema.org",
      "@type": "BlogPosting",
      "articleSection": "posts",
      "name": "Installing CA certs into the JVM truststore",
      "headline": "Installing CA certs into the JVM truststore",
      "alternativeHeadline": "",
      "description": "\u003cp\u003eWhen you\u0026rsquo;re hitting an internal API over HTTPS and the JVM doesn\u0026rsquo;t trust the corp CA, you get the usual \u003ccode\u003ePKIX path building failed\u003c\/code\u003e or \u003ccode\u003eunable to find valid certification path\u003c\/code\u003e errors. Fix: add the server\u0026rsquo;s cert (or the CA that signed it) into Java\u0026rsquo;s cacerts.\u003c\/p\u003e\n\u003cp\u003e\u003cstrong\u003eOne-liner\u003c\/strong\u003e (replace paths and alias as needed):\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\u0022\u003e\u003ccode class=\u0022language-bash\u0022 data-lang=\u0022bash\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003esudo \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;\u003c\/span\u003e$JAVA_HOME\u003cspan style=\u0022color:#e6db74\u0022\u003e\/bin\/keytool\u0026#34;\u003c\/span\u003e -importcert -alias \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;api.corp.intranet\u0026#34;\u003c\/span\u003e -file \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;\/Users\/user\/Downloads\/api.corp.intranet.cer\u0026#34;\u003c\/span\u003e -keystore \u003cspan style=\u0022color:#e6db74\u0022\u003e\u0026#34;\u003c\/span\u003e$JAVA_HOME\u003cspan style=\u0022color:#e6db74\u0022\u003e\/lib\/security\/cacerts\u0026#34;\u003c\/span\u003e -storepass changeit -noprompt\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/div\u003e\u003cp\u003e\u003cstrong\u003eWhat to change:\u003c\/strong\u003e\u003c\/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003e-alias\u003c\/code\u003e\u003c\/strong\u003e — Any label you\u0026rsquo;ll recognize (e.g. the hostname). Must be unique in the keystore.\u003c\/li\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003e-file\u003c\/code\u003e\u003c\/strong\u003e — Path to the \u003ccode\u003e.cer\u003c\/code\u003e (or \u003ccode\u003e.crt\u003c\/code\u003e) you got from the server or your security team.\u003c\/li\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003e-keystore\u003c\/code\u003e\u003c\/strong\u003e — Default truststore is \u003ccode\u003e$JAVA_HOME\/lib\/security\/cacerts\u003c\/code\u003e. Leave as-is unless you use a custom one.\u003c\/li\u003e\n\u003cli\u003e\u003cstrong\u003e\u003ccode\u003e-storepass\u003c\/code\u003e\u003c\/strong\u003e — Default password for the stock cacerts is \u003ccode\u003echangeit\u003c\/code\u003e. Yes, really.\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003cp\u003e\u003cstrong\u003eWhy \u003ccode\u003esudo\u003c\/code\u003e?\u003c\/strong\u003e The default cacerts is under \u003ccode\u003e$JAVA_HOME\/lib\/security\/\u003c\/code\u003e, which is usually root-owned. One-time add, then your JVM trusts that cert.\u003c\/p\u003e",
      "inLanguage": "en-us",
      "isFamilyFriendly": "true",
      "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "http:\/\/localhost:1313\/pages\/posts\/installing-cacerts\/"
      },
      "author" : {
          "@type": "Person",
          "name": ""
      },
      "creator" : {
          "@type": "Person",
          "name": ""
      },
      "accountablePerson" : {
          "@type": "Person",
          "name": ""
      },
      "copyrightHolder" : "Sachin",
      "copyrightYear" : "2025",
      "dateCreated": "2025-02-12T00:00:00.00Z",
      "datePublished": "2025-02-12T00:00:00.00Z",
      "dateModified": "2025-02-12T00:00:00.00Z",
      "publisher":{
          "@type":"Organization",
          "name": "Sachin",
          "url": "http://localhost:1313/pages/",
          "logo": {
              "@type": "ImageObject",
              "url": "http:\/\/localhost:1313\/pages\/",
              "width":"32",
              "height":"32"
          }
      },
      "image": "http://localhost:1313/pages/",
      "url" : "http:\/\/localhost:1313\/pages\/posts\/installing-cacerts\/",
      "wordCount" : "165",
      "genre" : [ "java" , "ssl" , "certificates" ],
      "keywords" : [ "java" , "ssl" , "certificates" ]
  }
  </script>
  

  <script defer>
    (function() {
      function initCopyButtons() {
        var blocks = document.querySelectorAll('.content pre');
        blocks.forEach(function(pre) {
          if (pre.querySelector('.copy-code-btn')) return;
          var btn = document.createElement('button');
          btn.type = 'button';
          btn.className = 'copy-code-btn';
          btn.textContent = 'Copy';
          btn.title = 'Copy to clipboard';
          btn.setAttribute('aria-label', 'Copy code to clipboard');
          btn.addEventListener('click', function() {
            var code = pre.querySelector('code');
            var text = (code ? code : pre).innerText || (code ? code : pre).textContent;
            navigator.clipboard.writeText(text).then(function() {
              btn.textContent = 'Copied!';
              btn.classList.add('copied');
              setTimeout(function() {
                btn.textContent = 'Copy';
                btn.classList.remove('copied');
              }, 1500);
            });
          });
          pre.appendChild(btn);
        });
      }
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initCopyButtons);
      } else {
        initCopyButtons();
      }
    })();
  </script>
  
  </head>

<body>
  <a class="skip-link" href="#main">Skip to main</a>
  <main id="main">
  <div class="content">
    <header>
  <p style="padding: 0;margin: 0;">
    <a href="http://localhost:1313/pages/">
      <b>Sachin</b>
      <span class="text-stone-500 animate-blink">▮</span>
    </a>
  </p>
  <ul style="padding: 0;margin: 0;">
    <li><a href="http://localhost:1313/pages/posts/"><span>Posts</span></a></li>
    <li><a href="http://localhost:1313/pages/about/"><span>About</span></a></li>
    <li><button type="button" class="theme-toggle" id="theme-toggle" title="Toggle dark/light">◐</button></li>
  </ul>
</header>
<script>
  (function() {
    var btn = document.getElementById('theme-toggle');
    if (!btn) return;
    function cycle() {
      var el = document.documentElement;
      var cur = el.dataset.theme || '';
      var next = (cur === 'dark') ? 'light' : 'dark';
      el.dataset.theme = next;
      localStorage.setItem('theme', next);
    }
    btn.addEventListener('click', cycle);
  })();
</script>
<hr class="header-divider">
    <section>
      <h2 class="post">Installing CA certs into the JVM truststore</h2>
      <p>When you&rsquo;re hitting an internal API over HTTPS and the JVM doesn&rsquo;t trust the corp CA, you get the usual <code>PKIX path building failed</code> or <code>unable to find valid certification path</code> errors. Fix: add the server&rsquo;s cert (or the CA that signed it) into Java&rsquo;s cacerts.</p>
<p><strong>One-liner</strong> (replace paths and alias as needed):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo <span style="color:#e6db74">&#34;</span>$JAVA_HOME<span style="color:#e6db74">/bin/keytool&#34;</span> -importcert -alias <span style="color:#e6db74">&#34;api.corp.intranet&#34;</span> -file <span style="color:#e6db74">&#34;/Users/user/Downloads/api.corp.intranet.cer&#34;</span> -keystore <span style="color:#e6db74">&#34;</span>$JAVA_HOME<span style="color:#e6db74">/lib/security/cacerts&#34;</span> -storepass changeit -noprompt
</span></span></code></pre></div><p><strong>What to change:</strong></p>
<ul>
<li><strong><code>-alias</code></strong> — Any label you&rsquo;ll recognize (e.g. the hostname). Must be unique in the keystore.</li>
<li><strong><code>-file</code></strong> — Path to the <code>.cer</code> (or <code>.crt</code>) you got from the server or your security team.</li>
<li><strong><code>-keystore</code></strong> — Default truststore is <code>$JAVA_HOME/lib/security/cacerts</code>. Leave as-is unless you use a custom one.</li>
<li><strong><code>-storepass</code></strong> — Default password for the stock cacerts is <code>changeit</code>. Yes, really.</li>
</ul>
<p><strong>Why <code>sudo</code>?</strong> The default cacerts is under <code>$JAVA_HOME/lib/security/</code>, which is usually root-owned. One-time add, then your JVM trusts that cert.</p>
<p>After this, restart the app (or JVM) so it reloads the truststore. No more PKIX errors for that host.</p>

      
      <div class="post-date">
        <span class="g time">February 12, 2025 </span> &#8729;
         
        
        <a href="/pages/posts/#java">java</a>
        <a href="/pages/posts/#ssl">ssl</a>
        <a href="/pages/posts/#certificates">certificates</a>
      </div>
      
    </section>
    
    
    
  </div>
</main>
</body>
</html>
